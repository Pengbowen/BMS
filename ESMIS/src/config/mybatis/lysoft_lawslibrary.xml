<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.lanyuan.assembly.lawslibrary.DaoLaws" >
  <resultMap id="BaseResultMap" type="com.lanyuan.assembly.lawslibrary.EntityLaws" >
    <id column="standardId" property="standardId" jdbcType="VARCHAR" />
    <result column="standardNo" property="standardNo" jdbcType="VARCHAR" />
    <result column="standardName" property="standardName" jdbcType="VARCHAR" />
    <result column="standardCategory" property="standardCategory" jdbcType="VARCHAR" />
    <result column="standardCategoryName" property="standardCategoryName" jdbcType="VARCHAR" />
    <result column="content" property="content" jdbcType="VARCHAR" />
    <result column="documentType" property="documentType" jdbcType="VARCHAR" />
    <result column="approvedUnit" property="approvedUnit" jdbcType="VARCHAR" />
    <result column="approvedDate" property="approvedDate" jdbcType="VARCHAR" />
    <result column="effectiveDate" property="effectiveDate" jdbcType="VARCHAR" />
    <result column="proposedUnit" property="proposedUnit" jdbcType="VARCHAR" />
    <result column="draftedUnit" property="draftedUnit" jdbcType="VARCHAR" />
    <result column="majorDrafters" property="majorDrafters" jdbcType="VARCHAR" />
    <result column="subjectWords" property="subjectWords" jdbcType="VARCHAR" />
    <result column="effectiveState" property="effectiveState" jdbcType="INTEGER" />
    <result column="explaintd" property="explaintd" jdbcType="VARCHAR" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
    <result column="dataSource" property="dataSource" jdbcType="INTEGER" />
    <result column="filePath" property="filePath" jdbcType="VARCHAR" />
    <result column="browseVolume" property="browseVolume" jdbcType="INTEGER" />
     <result column="upgradeVersion" property="upgradeVersion" jdbcType="VARCHAR" />
    <result column="upgradeUser" property="upgradeUser" jdbcType="VARCHAR" />
    <result column="upgradeDate" property="upgradeDate" jdbcType="VARCHAR" />
    <result column="oldStandardId" property="oldStandardId" jdbcType="VARCHAR" />
    <result column="oldStandardNo" property="oldStandardNo" jdbcType="VARCHAR" />
    <result column="creator" property="creator" jdbcType="VARCHAR" />
    <result column="creatorName" property="creatorName" jdbcType="VARCHAR" />
    <result column="createTime" property="createTime" jdbcType="VARCHAR" />
    <result column="createIP" property="createIP" jdbcType="VARCHAR" />
    <result column="modifyer" property="modifyer" jdbcType="VARCHAR" />
    <result column="modifyerName" property="modifyerName" jdbcType="VARCHAR" />
    <result column="modifyTime" property="modifyTime" jdbcType="VARCHAR" />
    <result column="modifyIP" property="modifyIP" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    standardId, standardNo, standardName, standardCategory, standardCategoryName, subjectWords, explaintd, remark,
    content, documentType, approvedUnit, approvedDate, effectiveDate, proposedUnit, draftedUnit, majorDrafters,
    dataSource, filePath, browseVolume, upgradeVersion, upgradeUser, upgradeDate, oldStandardId, oldStandardNo,
    creator, creatorName, createTime, createIP, modifyer, modifyerName, modifyTime, modifyIP
  </sql>
  <update id="updateBrowseVolume" parameterType="java.lang.String" >
    update lysoft_standardlibrary set browseVolume = browseVolume + 1 where standardId = #{standardId,jdbcType=VARCHAR}
  </update>
  <update id="cancellation" parameterType="java.lang.String" >
 	 update lysoft_standardlibrary set effectiveState = '0' where standardId = #{standardId,jdbcType=VARCHAR}
  </update>
  <!-- 获取最大值standardId -->
  <select id="getMaxstandardId" resultType="java.lang.String">
		select max(standardId) from
		lysoft_standardlibrary where documentType = '2';
	</select>
  <select id="selectById" resultMap="BaseResultMap" parameterType="java.lang.String" >
    select 
    <include refid="Base_Column_List" />
    from lysoft_standardlibrary
    where standardId = #{standardId,jdbcType=VARCHAR}
  </select>
  <delete id="deleteById" parameterType="java.lang.String" >
    delete from lysoft_standardlibrary
    where standardId = #{standardId,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.lanyuan.assembly.lawslibrary.EntityLaws" >
    insert into lysoft_standardlibrary
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="standardId != null" >
        standardId,
      </if>
      <if test="standardNo != null" >
        standardNo,
      </if>
      <if test="standardName != null" >
        standardName,
      </if>
      <if test="standardCategory != null" >
        standardCategory,
      </if>
      <if test="standardCategoryName != null" >
        standardCategoryName,
      </if>
      <if test="content != null" >
        content,
      </if>
      <if test="documentType != null" >
        documentType,
      </if>
      <if test="approvedUnit != null" >
        approvedUnit,
      </if>
      <if test="approvedDate != null" >
        approvedDate,
      </if>
      <if test="effectiveDate != null" >
        effectiveDate,
      </if>
      <if test="proposedUnit != null" >
        proposedUnit,
      </if>
      <if test="draftedUnit != null" >
        draftedUnit,
      </if>
      <if test="majorDrafters != null" >
        majorDrafters,
      </if>
      <if test="subjectWords != null" >
        subjectWords,
      </if>
      <if test="explaintd != null" >
        explaintd,
      </if>
      <if test="remark != null" >
        remark,
      </if>
      <if test="dataSource != null" >
        dataSource,
      </if>
      <if test="filePath != null" >
        filePath,
      </if>
      <if test="browseVolume != null" >
        browseVolume,
      </if>
      <if test="upgradeVersion != null" >
        upgradeVersion,
      </if>
      <if test="upgradeUser != null" >
        upgradeUser,
      </if>
      <if test="upgradeDate != null" >
        upgradeDate,
      </if>
      <if test="oldStandardId != null" >
        oldStandardId,
      </if>
      <if test="oldStandardNo != null" >
        oldStandardNo,
       </if>
      <if test="creator != null" >
        creator,
      </if>
      <if test="creatorName != null" >
        creatorName,
      </if>
      <if test="createTime != null" >
        createTime,
      </if>
      <if test="createIP != null" >
        createIP,
      </if>
      <if test="modifyer != null" >
        modifyer,
      </if>
      <if test="modifyerName != null" >
        modifyerName,
      </if>
      <if test="modifyTime != null" >
        modifyTime,
      </if>
      <if test="modifyIP != null" >
        modifyIP,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="standardId != null" >
        #{standardId,jdbcType=VARCHAR},
      </if>
      <if test="standardNo != null" >
        #{standardNo,jdbcType=VARCHAR},
      </if>
      <if test="standardName != null" >
        #{standardName,jdbcType=VARCHAR},
      </if>
      <if test="standardCategory != null" >
        #{standardCategory,jdbcType=VARCHAR},
      </if>
      <if test="standardCategoryName != null" >
        #{standardCategoryName,jdbcType=VARCHAR},
      </if>
      <if test="content != null" >
        #{content,jdbcType=VARCHAR},
      </if>
      <if test="documentType != null" >
        #{documentType,jdbcType=VARCHAR},
      </if>
      <if test="approvedUnit != null" >
        #{approvedUnit,jdbcType=VARCHAR},
      </if>
      <if test="approvedDate != null" >
        #{approvedDate,jdbcType=VARCHAR},
      </if>
      <if test="effectiveDate != null" >
        #{effectiveDate,jdbcType=VARCHAR},
      </if>
      <if test="proposedUnit != null" >
        #{proposedUnit,jdbcType=VARCHAR},
      </if>
      <if test="draftedUnit != null" >
        #{draftedUnit,jdbcType=VARCHAR},
      </if>
      <if test="majorDrafters != null" >
        #{majorDrafters,jdbcType=VARCHAR},
      </if>
      <if test="subjectWords != null" >
        #{subjectWords,jdbcType=VARCHAR},
      </if>
      <if test="explaintd != null" >
        #{explaintd,jdbcType=VARCHAR},
      </if>
      <if test="remark != null" >
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="dataSource != null" >
        #{dataSource,jdbcType=INTEGER},
      </if>
      <if test="filePath != null" >
        #{filePath,jdbcType=VARCHAR},
      </if>
      <if test="browseVolume != null" >
        #{browseVolume,jdbcType=INTEGER},
      </if>
       <if test="upgradeVersion != null" >
        #{upgradeVersion,jdbcType=VARCHAR},
      </if>
      <if test="upgradeUser != null" >
        #{upgradeUser,jdbcType=VARCHAR},
      </if>
      <if test="upgradeDate != null" >
        #{upgradeDate,jdbcType=VARCHAR},
      </if>
      <if test="oldStandardId != null" >
        #{oldStandardId,jdbcType=VARCHAR},
      </if>
      <if test="oldStandardNo != null" >
        #{oldStandardNo,jdbcType=VARCHAR},
      </if>
      <if test="creator != null" >
        #{creator,jdbcType=VARCHAR},
      </if>
      <if test="creatorName != null" >
        #{creatorName,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null" >
        #{createTime,jdbcType=VARCHAR},
      </if>
      <if test="createIP != null" >
        #{createIP,jdbcType=VARCHAR},
      </if>
      <if test="modifyer != null" >
        #{modifyer,jdbcType=VARCHAR},
      </if>
      <if test="modifyerName != null" >
        #{modifyerName,jdbcType=VARCHAR},
      </if>
      <if test="modifyTime != null" >
        #{modifyTime,jdbcType=VARCHAR},
      </if>
      <if test="modifyIP != null" >
        #{modifyIP,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="update" parameterType="com.lanyuan.assembly.lawslibrary.EntityLaws" >
    update lysoft_standardlibrary
    <set >
     <if test="standardId != null" >
        standardId=#{standardId,jdbcType=VARCHAR},
      </if>
      <if test="standardNo != null" >
        standardNo=#{standardNo,jdbcType=VARCHAR},
      </if>
      <if test="standardName != null" >
        standardName=#{standardName,jdbcType=VARCHAR},
      </if>
      <if test="standardCategory != null" >
        standardCategory=#{standardCategory,jdbcType=VARCHAR},
      </if>
      <if test="standardCategoryName != null" >
        standardCategoryName=#{standardCategoryName,jdbcType=VARCHAR},
      </if>
      <if test="content != null" >
        content=#{content,jdbcType=VARCHAR},
      </if>
      <if test="documentType != null" >
        documentType=#{documentType,jdbcType=VARCHAR},
      </if>
      <if test="approvedUnit != null" >
        approvedUnit=#{approvedUnit,jdbcType=VARCHAR},
      </if>
      <if test="approvedDate != null" >
        approvedDate=#{approvedDate,jdbcType=VARCHAR},
      </if>
      <if test="effectiveDate != null" >
        effectiveDate=#{effectiveDate,jdbcType=VARCHAR},
      </if>
      <if test="proposedUnit != null" >
        proposedUnit=#{proposedUnit,jdbcType=VARCHAR},
      </if>
      <if test="draftedUnit != null" >
        draftedUnit=#{draftedUnit,jdbcType=VARCHAR},
      </if>
      <if test="majorDrafters != null" >
        majorDrafters=#{majorDrafters,jdbcType=VARCHAR},
      </if>
      <if test="subjectWords != null" >
        subjectWords=#{subjectWords,jdbcType=VARCHAR},
      </if>
      <if test="explaintd != null" >
        explaintd=#{explaintd,jdbcType=VARCHAR},
      </if>
      <if test="remark != null" >
        remark=#{remark,jdbcType=VARCHAR},
      </if>
      <if test="dataSource != null" >
        dataSource=#{dataSource,jdbcType=INTEGER},
      </if>
      <if test="filePath != null" >
        filePath=#{filePath,jdbcType=VARCHAR},
      </if>
      <if test="browseVolume != null" >
        browseVolume=#{browseVolume,jdbcType=INTEGER},
      </if>
        <if test="upgradeVersion != null" >
        upgradeVersion=#{upgradeVersion,jdbcType=VARCHAR},
      </if>
      <if test="upgradeUser != null" >
        upgradeUser=#{upgradeUser,jdbcType=VARCHAR},
      </if>
      <if test="upgradeDate != null" >
        upgradeDate=#{upgradeDate,jdbcType=VARCHAR},
      </if>
      <if test="oldStandardId != null" >
        oldStandardId=#{oldStandardId,jdbcType=VARCHAR},
      </if>
      <if test="oldStandardNo != null" >
        oldStandardNo=#{oldStandardNo,jdbcType=VARCHAR},
      </if>
      <if test="creator != null" >
        creator=#{creator,jdbcType=VARCHAR},
      </if>
      <if test="creatorName != null" >
        creatorName=#{creatorName,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null" >
        createTime=#{createTime,jdbcType=VARCHAR},
      </if>
      <if test="createIP != null" >
        createIP=#{createIP,jdbcType=VARCHAR},
      </if>
      <if test="modifyer != null" >
        modifyer=#{modifyer,jdbcType=VARCHAR},
      </if>
      <if test="modifyerName != null" >
        modifyerName=#{modifyerName,jdbcType=VARCHAR},
      </if>
      <if test="modifyTime != null" >
        modifyTime=#{modifyTime,jdbcType=VARCHAR},
      </if>
      <if test="modifyIP != null" >
        modifyIP=#{modifyIP,jdbcType=VARCHAR},
      </if>
    </set>
    where standardId = #{standardId,jdbcType=VARCHAR}
  </update>
  <select id="getTotalCount" parameterType="java.lang.String"
		resultType="int">
		SELECT count(*) from lysoft_standardlibrary
		${sql}
	</select>
	<select id="selectList" parameterType="java.lang.String" resultMap="BaseResultMap">
		select 
			<include refid="Base_Column_List" /> 
		from lysoft_standardlibrary
		${sql}
	</select>
	<select id="selectPageList" parameterType="com.lanyuan.assembly.common.Page" resultMap="BaseResultMap">
		select 
			<include refid="Base_Column_List" /> 
		from lysoft_standardlibrary
		${sql}
	</select>
	 <select id="selectLawsStatement" resultType="java.util.HashMap">
  SELECT
	standardCategory as standardCategory,
	standardCategoryName as standardCategoryName,
	COUNT(standardCategory) as standardcategorycount
FROM
	lysoft_standardlibrary
	WHERE documentType='2'
GROUP BY
	standardCategory
  </select>
</mapper>