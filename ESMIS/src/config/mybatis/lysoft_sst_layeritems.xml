<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.lanyuan.assembly.sst.layeritems.DAOSSTLayerItems" >
  <resultMap id="BaseResultMap" type="com.lanyuan.assembly.sst.layeritems.EntitySSTLayerItems" >
    <id column="layerItemId" property="layerItemId" jdbcType="VARCHAR" />
    <result column="SSTId" property="SSTId" jdbcType="INTEGER" />
    <result column="layerItemNo" property="layerItemNo" jdbcType="VARCHAR" />
    <result column="layerItemName" property="layerItemName" jdbcType="VARCHAR" />
    <result column="layerNo" property="layerNo" jdbcType="INTEGER" />
    <result column="belongItemId" property="belongItemId" jdbcType="VARCHAR" />
    <result column="displayOrder" property="displayOrder" jdbcType="INTEGER" />
    <result column="subItemCount" property="subItemCount" jdbcType="INTEGER" />
    <result column="subClassifyCount" property="subClassifyCount" jdbcType="INTEGER" />
    <result column="standardCount" property="standardCount" jdbcType="INTEGER" />
    <result column="isEnabled" property="isEnabled" jdbcType="INTEGER" />
    <result column="isVisible" property="isVisible" jdbcType="INTEGER" />
    <result column="modifyer" property="modifyer" jdbcType="VARCHAR" />
    <result column="modifyerName" property="modifyerName" jdbcType="VARCHAR" />
    <result column="modifyTime" property="modifyTime" jdbcType="VARCHAR" />
    <result column="modifyIP" property="modifyIP" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    layerItemId, SSTId, layerItemName,layerItemNo ,layerNo, belongItemId, displayOrder, subItemCount, 
    subClassifyCount, standardCount, isEnabled,isVisible,modifyer, modifyerName, modifyTime, modifyIP
  </sql>
  <!-- 根据项目id查找项目 -->
  <select id="selectById" resultMap="BaseResultMap" parameterType="java.lang.String" >
    select 
    <include refid="Base_Column_List" />
    from lysoft_sst_layeritems
    where layerItemId = #{layerItemId,jdbcType=VARCHAR}
  </select>
  <!-- 根据项目id删除项目 -->
  <delete id="deleteById" parameterType="java.lang.String" >
    delete from lysoft_sst_layeritems
    where layerItemId = #{layeritemid,jdbcType=VARCHAR}
  </delete>
  <!-- 添加项目 -->
  <insert id="insert" parameterType="com.lanyuan.assembly.sst.layeritems.EntitySSTLayerItems" >
    insert into lysoft_sst_layeritems
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="layerItemId != null" >
        layerItemId,
      </if>
      <if test="SSTId != null" >
        SSTId,
      </if>
      <if test="layerItemName != null" >
        layerItemName,
      </if>
       <if test="layerItemNo != null" >
        layerItemNo,
      </if>
      <if test="layerNo != null" >
        layerNo,
      </if>
      <if test="belongItemId != null" >
        belongItemId,
      </if>
      <if test="displayOrder != null" >
        displayOrder,
      </if>
      <if test="subItemCount != null" >
        subItemCount,
      </if>
      <if test="subClassifyCount != null" >
        subClassifyCount,
      </if>
      <if test="standardCount != null" >
        standardCount,
      </if>
      <if test="isEnabled != null" >
        isEnabled,
      </if>
      <if test="isVisible != null" >
        isVisible,
      </if>
      <if test="modifyer != null" >
        modifyer,
      </if>
      <if test="modifyerName != null" >
        modifyerName,
      </if>
      <if test="modifyTime != null" >
        modifyTime,
      </if>
      <if test="modifyIP != null" >
        modifyIP,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="layerItemId != null" >
        #{layerItemId,jdbcType=VARCHAR},
      </if> 
      <if test="SSTId != null" >
        #{SSTId,jdbcType=INTEGER},
      </if>
      <if test="layerItemName != null" >
        #{layerItemName,jdbcType=VARCHAR},
      </if>
       <if test="layerItemNo != null" >
        #{layerItemNo,jdbcType=VARCHAR},
      </if>
      <if test="layerNo != null" >
        #{layerNo,jdbcType=INTEGER},
      </if>
      <if test="belongItemId != null" >
        #{belongItemId,jdbcType=VARCHAR},
      </if>
      <if test="displayOrder != null" >
        #{displayOrder,jdbcType=INTEGER},
      </if>
      <if test="subItemCount != null" >
        #{subItemCount,jdbcType=INTEGER},
      </if>
      <if test="subClassifyCount != null" >
        #{subClassifyCount,jdbcType=INTEGER},
      </if>
      <if test="standardCount != null" >
        #{standardCount,jdbcType=INTEGER},
      </if>
      <if test="isEnabled != null" >
        #{isEnabled,jdbcType=INTEGER},
      </if>
      <if test="isVisible != null" >
        #{isVisible,jdbcType=INTEGER},
      </if>
      <if test="modifyer != null" >
        #{modifyer,jdbcType=VARCHAR},
      </if>
      <if test="modifyerName != null" >
        #{modifyerName,jdbcType=VARCHAR},
      </if>
      <if test="modifyTime != null" >
        #{modifyTime,jdbcType=VARCHAR},
      </if>
      <if test="modifyIP != null" >
        #{modifyIP,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <!-- 更新项目 -->
  <update id="update" parameterType="com.lanyuan.assembly.sst.layeritems.EntitySSTLayerItems" >
    update lysoft_sst_layeritems
    <set >
      <if test="SSTId != null" >
        SSTId = #{SSTId,jdbcType=INTEGER},
      </if>
      <if test="layerItemName != null" >
        layerItemName = #{layerItemName,jdbcType=VARCHAR},
      </if>
      <if test="layerItemNo != null" >
        layerItemNo = #{layerItemNo,jdbcType=VARCHAR},
      </if>
      <if test="layerNo != null" >
        layerNo = #{layerNo,jdbcType=INTEGER},
      </if>
      <if test="belongItemId != null" >
        belongItemId = #{belongItemId,jdbcType=VARCHAR},
      </if>
      <if test="displayOrder != null" >
        displayOrder = #{displayOrder,jdbcType=INTEGER},
      </if>
      <if test="subItemCount != null" >
        subItemCount = #{subItemCount,jdbcType=INTEGER},
      </if>
      <if test="subClassifyCount != null" >
        subClassifyCount = #{subClassifyCount,jdbcType=INTEGER},
      </if>
      <if test="standardCount != null" >
        standardCount = #{standardCount,jdbcType=INTEGER},
      </if>
      <if test="isEnabled != null" >
        isEnabled = #{isEnabled,jdbcType=INTEGER},
      </if>
       <if test="isEnabled != null" >
        isEnabled = #{isEnabled,jdbcType=INTEGER},
      </if>
      <if test="modifyer != null" >
        modifyer = #{modifyer,jdbcType=VARCHAR},
      </if>
      <if test="modifyerName != null" >
        modifyerName = #{modifyerName,jdbcType=VARCHAR},
      </if>
      <if test="modifyTime != null" >
        modifyTime = #{modifyTime,jdbcType=VARCHAR},
      </if>
      <if test="modifyIP != null" >
        modifyIP = #{modifyIP,jdbcType=VARCHAR},
      </if>
    </set>
    where layerItemId = #{layerItemId,jdbcType=VARCHAR}
  	</update>
 	<select id="getTotalCount" parameterType="java.lang.String"
		resultType="java.lang.Integer">
		SELECT count(*) from lysoft_sst_layeritems 
		${sql}
	</select>
	
	<select id="selectList" parameterType="java.lang.String" resultMap="BaseResultMap">
		select 
			<include refid="Base_Column_List" /> 
		from lysoft_sst_layeritems 
		${sql}
	</select>
	
	<select id="selectPageList" parameterType="com.lanyuan.assembly.common.Page"
		resultMap="BaseResultMap">
		select 
			<include refid="Base_Column_List" /> 
		from lysoft_sst_layeritems 
	${sql}
	</select>
	<!-- 根据所属体系表查询项目 (根据层级和显示序号排序)-->
	<select id ="selectBySSTId" parameterType="java.lang.Integer" resultMap="BaseResultMap">
	select
	<include refid="Base_Column_List" /> 
	from lysoft_sst_layeritems 
	where SSTId =  #{SSTId,jdbcType=INTEGER}
	order by
	layerNo , displayOrder
	</select>
	<!-- 根据所属体系表ID查询最大项目id -->
	<select id ="selectMaxlayerItemId" parameterType="java.lang.String" resultType="java.lang.String">
	select max(layerItemId) from lysoft_sst_layeritems
	where SSTId =  #{SSTId,jdbcType=INTEGER}
	</select>
	<!-- 根据项目id查询子项目数量 -->
	<select id="selectSubItemCount" parameterType="java.lang.String" resultType="java.lang.Integer">
	select count(*) from lysoft_sst_layeritems where 
	belongItemId = #{layerItemId,jdbcType=VARCHAR}
	</select>
	<!-- 根据项目Id查询子分类数量 -->
	<select id="selectSubClassCount" parameterType="java.lang.String" resultType="java.lang.Integer">
	select count(*) from lysoft_sst_subclassify where
	layeritemid = #{layerItemId,jdbcType=VARCHAR}
	</select>
	<!-- 根据项目id查询标准数量 -->
	<select id="selectStandardCount" parameterType="java.lang.String" resultType="java.lang.Integer">
	select count(*) from lysoft_sst_standardlist where
	layeritemid = #{layerItemId,jdbcType=VARCHAR}
	</select>
	<!-- 根据层级查询本层级最大的显示顺序 -->
	<select id="selectMaxDisplayOrderByLayerNo" parameterType="java.lang.Integer" resultType="java.lang.Integer">
	select max(displayOrder) as maxDisplayOrder  from lysoft_sst_layeritems where
	layerNo =  #{layerNo,jdbcType=INTEGER}
	</select>
	<!-- 获取所有的项目id -->
	<select id="selectAllLayerItemId" resultType="java.lang.String">
	select layerItemId from lysoft_sst_layeritems
	where SSTId =  #{SSTId,jdbcType=INTEGER}
	</select>	
	<!-- 获取所有的子分类编号 -->
	<select id="selectAllSubClassId" resultType="java.lang.String">
	select subclassid from lysoft_sst_subclassify
	where SSTId =  #{SSTId,jdbcType=INTEGER}
	</select>
</mapper>